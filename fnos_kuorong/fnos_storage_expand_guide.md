# é£ç‰›OSå­˜å‚¨ç©ºé—´æ‰©å®¹å®Œæ•´æŒ‡å—

## ğŸ“‹ ç›®å½•
- [èƒŒæ™¯è¯´æ˜](#èƒŒæ™¯è¯´æ˜)
- [é€‚ç”¨ç¯å¢ƒ](#é€‚ç”¨ç¯å¢ƒ)
- [å‰ç½®æ¡ä»¶](#å‰ç½®æ¡ä»¶)
- [æ“ä½œæ­¥éª¤](#æ“ä½œæ­¥éª¤)
- [è‡ªåŠ¨åŒ–è„šæœ¬ä½¿ç”¨](#è‡ªåŠ¨åŒ–è„šæœ¬ä½¿ç”¨)
- [æ‰‹åŠ¨æ“ä½œæ­¥éª¤](#æ‰‹åŠ¨æ“ä½œæ­¥éª¤)
- [éªŒè¯æ‰©å®¹ç»“æœ](#éªŒè¯æ‰©å®¹ç»“æœ)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
- [å®‰å…¨å»ºè®®](#å®‰å…¨å»ºè®®)

## ğŸ” èƒŒæ™¯è¯´æ˜

### é—®é¢˜æè¿°
åœ¨ESXiè™šæ‹ŸåŒ–ç¯å¢ƒä¸­è¿è¡Œé£ç‰›OSæ—¶ï¼Œå½“æˆ‘ä»¬åœ¨ESXiç®¡ç†ç•Œé¢ä¸­æ‰©å®¹è™šæ‹Ÿç£ç›˜åï¼Œé£ç‰›OSç³»ç»Ÿèƒ½å¤Ÿè¯†åˆ«åˆ°æ‰©å®¹åçš„ç£ç›˜å¤§å°ï¼Œä½†å­˜å‚¨ç©ºé—´çš„å¯ç”¨å®¹é‡ä»ç„¶æ˜¾ç¤ºä¸ºæ‰©å®¹å‰çš„å¤§å°ã€‚

### åŸå› åˆ†æ
è¿™æ˜¯å› ä¸ºé£ç‰›OSä½¿ç”¨äº†LVMï¼ˆé€»è¾‘å·ç®¡ç†ï¼‰æ¥ç®¡ç†å­˜å‚¨ç©ºé—´ï¼Œç£ç›˜æ‰©å®¹åéœ€è¦ä¾æ¬¡è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š
1. **åˆ†åŒºæ‰©å±•** - æ‰©å±•ç£ç›˜åˆ†åŒºä»¥ä½¿ç”¨æ–°å¢çš„ç£ç›˜ç©ºé—´
2. **ç‰©ç†å·æ‰©å±•** - æ‰©å±•LVMç‰©ç†å·(PV)
3. **é€»è¾‘å·æ‰©å±•** - æ‰©å±•LVMé€»è¾‘å·(LV)
4. **æ–‡ä»¶ç³»ç»Ÿæ‰©å®¹** - è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿå¤§å°ä»¥ä½¿ç”¨æ–°å¢ç©ºé—´

### å­˜å‚¨æ¶æ„
```
ESXiè™šæ‹Ÿç£ç›˜ â†’ ç£ç›˜åˆ†åŒº â†’ LVMç‰©ç†å·(PV) â†’ LVMå·ç»„(VG) â†’ LVMé€»è¾‘å·(LV) â†’ æ–‡ä»¶ç³»ç»Ÿ â†’ é£ç‰›OSå­˜å‚¨ç©ºé—´
```

## ğŸ–¥ï¸ é€‚ç”¨ç¯å¢ƒ

- **è™šæ‹ŸåŒ–å¹³å°**: VMware ESXi 6.0+
- **æ“ä½œç³»ç»Ÿ**: é£ç‰›OS (fnOS) å„ç‰ˆæœ¬
- **å­˜å‚¨é…ç½®**: ä½¿ç”¨LVMç®¡ç†çš„å­˜å‚¨ç©ºé—´
- **æ–‡ä»¶ç³»ç»Ÿ**: æ”¯æŒbtrfsã€ext4ã€ext3ã€xfsç­‰

## âœ… å‰ç½®æ¡ä»¶

### å¿…è¦æ¡ä»¶
1. **ESXiä¸­å·²å®Œæˆç£ç›˜æ‰©å®¹** - ç¡®ä¿è™šæ‹Ÿç£ç›˜å·²åœ¨ESXiç®¡ç†ç•Œé¢ä¸­æ‰©å®¹
2. **Rootæƒé™** - éœ€è¦ç®¡ç†å‘˜æƒé™æ‰§è¡Œç³»ç»Ÿçº§æ“ä½œ
3. **SSHè®¿é—®** - èƒ½å¤Ÿé€šè¿‡SSHè¿æ¥åˆ°é£ç‰›OSç³»ç»Ÿ
4. **ç³»ç»Ÿå¤‡ä»½** - å¼ºçƒˆå»ºè®®åˆ›å»ºè™šæ‹Ÿæœºå¿«ç…§æˆ–å®Œæ•´å¤‡ä»½

### æ£€æŸ¥æ¸…å•
- [ ] å·²åœ¨ESXiä¸­æ‰©å®¹è™šæ‹Ÿç£ç›˜
- [ ] å·²åˆ›å»ºè™šæ‹Ÿæœºå¿«ç…§
- [ ] ç¡®è®¤SSHè¿æ¥æ­£å¸¸
- [ ] ç¡®è®¤å…·æœ‰rootæƒé™
- [ ] ç¡®è®¤å­˜å‚¨ç©ºé—´å½“å‰å·¥ä½œæ­£å¸¸

## ğŸš€ æ“ä½œæ­¥éª¤

### æ–¹æ¡ˆä¸€ï¼šè‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆæ¨èï¼‰

#### 1. è·å–è„šæœ¬
```bash
# æ–¹æ³•ä¸€ï¼šä»GitHubå…‹éš†é¡¹ç›®
git clone https://github.com/3377/fnos_storage_expand.git
cd fnos_storage_expand

# æ–¹æ³•äºŒï¼šç›´æ¥ä¸‹è½½è„šæœ¬æ–‡ä»¶
wget https://raw.githubusercontent.com/3377/fnos_storage_expand/main/fnos_storage_expand.sh

# æ–¹æ³•ä¸‰ï¼šä½¿ç”¨scpä¸Šä¼ ï¼ˆåœ¨æœ¬åœ°æ‰§è¡Œï¼‰
scp fnos_storage_expand.sh root@your-fnos-ip:/root/

# è®¾ç½®æ‰§è¡Œæƒé™
chmod +x fnos_storage_expand.sh
```

#### 2. é¢„æ£€æŸ¥ï¼ˆå¯é€‰ä½†æ¨èï¼‰
```bash
# æ‰§è¡Œå¹²è¿è¡Œæ¨¡å¼ï¼Œä»…æ£€æµ‹é…ç½®ä¸æ‰§è¡Œå®é™…æ“ä½œ
sudo ./fnos_storage_expand.sh --dry-run
```

#### 3. æ‰§è¡Œæ‰©å®¹
```bash
# æ–¹æ³•ä¸€ï¼šäº¤äº’å¼èœå•ï¼ˆæ¨èï¼‰
sudo ./fnos_storage_expand.sh

# æ–¹æ³•äºŒï¼šç›´æ¥æ‰§è¡Œæ‰©å®¹
sudo ./fnos_storage_expand.sh --menu
# ç„¶åé€‰æ‹©é€‰é¡¹1è¿›è¡Œæ‰©å®¹

# æ–¹æ³•ä¸‰ï¼šå‘½ä»¤è¡Œæ¨¡å¼
sudo ./fnos_storage_expand.sh --backup create  # å…ˆåˆ›å»ºå¤‡ä»½
# ç„¶åæ‰§è¡Œæ‰©å®¹...
```

#### 4. è„šæœ¬æ‰§è¡Œæµç¨‹
è„šæœ¬å°†è‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š
1. **ç¯å¢ƒæ£€æµ‹** - æ£€æŸ¥ç³»ç»Ÿç¯å¢ƒå’Œå¿…è¦å·¥å…·
2. **å­˜å‚¨é…ç½®æ£€æµ‹** - è‡ªåŠ¨è¯†åˆ«å­˜å‚¨è®¾å¤‡å’ŒLVMé…ç½®
3. **å¤‡ä»½é…ç½®** - å¤‡ä»½åˆ†åŒºè¡¨ã€LVMé…ç½®ç­‰å…³é”®ä¿¡æ¯
4. **æ‰©å±•åˆ†åŒº** - åˆ é™¤å¹¶é‡å»ºåˆ†åŒºä»¥ä½¿ç”¨å…¨éƒ¨ç£ç›˜ç©ºé—´
5. **LVMæ‰©å®¹** - æ‰©å±•ç‰©ç†å·å’Œé€»è¾‘å·
6. **æ–‡ä»¶ç³»ç»Ÿæ‰©å®¹** - æ ¹æ®æ–‡ä»¶ç³»ç»Ÿç±»å‹è¿›è¡Œç›¸åº”æ‰©å®¹
7. **éªŒè¯ç»“æœ** - æ£€æŸ¥æ‰©å®¹æ˜¯å¦æˆåŠŸ
8. **ç”ŸæˆæŠ¥å‘Š** - åˆ›å»ºè¯¦ç»†çš„æ“ä½œæŠ¥å‘Š

### æ–¹æ¡ˆäºŒï¼šæ‰‹åŠ¨æ“ä½œ

å¦‚æœè‡ªåŠ¨åŒ–è„šæœ¬æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ‰‹åŠ¨æ“ä½œï¼š

#### 1. ç¯å¢ƒå‡†å¤‡
```bash
# åˆ‡æ¢åˆ°rootç”¨æˆ·
sudo su -

# æŸ¥çœ‹å½“å‰ç£ç›˜çŠ¶æ€
lsblk
df -h
```

#### 2. æ£€æµ‹å­˜å‚¨é…ç½®
```bash
# æŸ¥çœ‹å­˜å‚¨ç©ºé—´æŒ‚è½½ä¿¡æ¯
mount | grep vol

# æŸ¥çœ‹LVMé…ç½®
pvdisplay
vgdisplay  
lvdisplay

# æŸ¥çœ‹ç£ç›˜åˆ†åŒº
fdisk -l
```

#### 3. å¤‡ä»½å…³é”®é…ç½®
```bash
# åˆ›å»ºå¤‡ä»½ç›®å½•
BACKUP_DIR="/tmp/fnos_backup_$(date +%Y%m%d_%H%M%S)"
mkdir -p "$BACKUP_DIR"

# å¤‡ä»½åˆ†åŒºè¡¨ï¼ˆå‡è®¾è®¾å¤‡ä¸º/dev/sdbï¼‰
sfdisk -d /dev/sdb > "$BACKUP_DIR/partition_table.backup"

# å¤‡ä»½LVMé…ç½®ï¼ˆå‡è®¾VGåä¸ºtrim_xxxï¼‰
vgcfgbackup trim_xxx -f "$BACKUP_DIR/lvm_backup"

# å¤‡ä»½fstab
cp /etc/fstab "$BACKUP_DIR/fstab.backup"
```

#### 4. æ‰©å±•åˆ†åŒº
```bash
# ä½¿ç”¨fdiskæ‰©å±•åˆ†åŒºï¼ˆä»¥/dev/sdb1ä¸ºä¾‹ï¼‰
fdisk /dev/sdb

# åœ¨fdiskä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
# d    - åˆ é™¤åˆ†åŒº
# 1    - é€‰æ‹©åˆ†åŒºå·1
# n    - æ–°å»ºåˆ†åŒº  
# p    - ä¸»åˆ†åŒº
# 1    - åˆ†åŒºå·1
# å›è½¦  - ä½¿ç”¨é»˜è®¤èµ·å§‹æ‰‡åŒº
# å›è½¦  - ä½¿ç”¨é»˜è®¤ç»“æŸæ‰‡åŒºï¼ˆç£ç›˜æœ«å°¾ï¼‰
# t    - ä¿®æ”¹åˆ†åŒºç±»å‹
# 1    - é€‰æ‹©åˆ†åŒºå·1
# 8e   - LVMç±»å‹
# w    - å†™å…¥å¹¶é€€å‡º

# é€šçŸ¥å†…æ ¸é‡æ–°è¯»å–åˆ†åŒºè¡¨
partprobe /dev/sdb
```

#### 5. LVMæ‰©å®¹
```bash
# æ‰©å±•ç‰©ç†å·
pvresize /dev/sdb1

# æ‰©å±•é€»è¾‘å·ï¼ˆä½¿ç”¨æ‰€æœ‰å¯ç”¨ç©ºé—´ï¼‰
lvresize -l +100%FREE /dev/trim_xxx/0

# æŸ¥çœ‹æ‰©å®¹ç»“æœ
pvdisplay
vgdisplay
lvdisplay
```

#### 6. æ–‡ä»¶ç³»ç»Ÿæ‰©å®¹
æ ¹æ®æ–‡ä»¶ç³»ç»Ÿç±»å‹é€‰æ‹©ç›¸åº”å‘½ä»¤ï¼š

**btrfsæ–‡ä»¶ç³»ç»Ÿï¼š**
```bash
btrfs filesystem resize max /vol1
```

**ext4/ext3/ext2æ–‡ä»¶ç³»ç»Ÿï¼š**
```bash
resize2fs /dev/mapper/trim_xxx-0
```

**xfsæ–‡ä»¶ç³»ç»Ÿï¼š**
```bash
xfs_growfs /vol1
```

## âœ… éªŒè¯æ‰©å®¹ç»“æœ

### 1. æ£€æŸ¥ç£ç›˜ä½¿ç”¨æƒ…å†µ
```bash
# æŸ¥çœ‹å­˜å‚¨ç©ºé—´å¤§å°
df -h /vol1

# æŸ¥çœ‹LVMçŠ¶æ€
pvdisplay
vgdisplay
lvdisplay
```

### 2. æ£€æŸ¥é£ç‰›OSç®¡ç†ç•Œé¢
1. ç™»å½•é£ç‰›OS Webç®¡ç†ç•Œé¢
2. è¿›å…¥å­˜å‚¨ç®¡ç†é¡µé¢
3. ç¡®è®¤å­˜å‚¨ç©ºé—´å¤§å°æ˜¯å¦æ­£ç¡®æ˜¾ç¤º

### 3. åŠŸèƒ½æµ‹è¯•
```bash
# æµ‹è¯•æ–‡ä»¶åˆ›å»ºå’Œåˆ é™¤
touch /vol1/test_file
rm /vol1/test_file

# æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿå®Œæ•´æ€§ï¼ˆå¯é€‰ï¼‰
# æ³¨æ„ï¼šä»¥ä¸‹å‘½ä»¤å¯èƒ½éœ€è¦å¸è½½æ–‡ä»¶ç³»ç»Ÿï¼Œè¯·è°¨æ…ä½¿ç”¨
# fsck /dev/mapper/trim_xxx-0
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ

#### 1. åˆ†åŒºæ‰©å±•å¤±è´¥
**é”™è¯¯ç°è±¡ï¼š** fdiskæ“ä½œå¤±è´¥æˆ–åˆ†åŒºè¡¨æŸåï¼Œåˆ†åŒºç±»å‹é”™è¯¯
**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥åˆ†åŒºè¡¨ç±»å‹
fdisk -l /dev/sdb

# å¯¹äºGPTåˆ†åŒºè¡¨ï¼Œç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„åˆ†åŒºç±»å‹
# GPT: ç±»å‹31 (Linux LVM)
# MBR: ç±»å‹8e (Linux LVM)

# æ¢å¤åˆ†åŒºè¡¨
sfdisk /dev/sdb < /tmp/fnos_backup_xxx/partition_table.backup

# é‡æ–°å¯åŠ¨ç³»ç»Ÿ
reboot
```

#### 2. LVMæ‰©å®¹å¤±è´¥
**é”™è¯¯ç°è±¡ï¼š** pvresizeæˆ–lvresizeå‘½ä»¤å¤±è´¥ï¼Œæç¤º"Volume group not found"
**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥LVMçŠ¶æ€
vgscan
pvscan
lvscan

# æ¿€æ´»å·ç»„
vgchange -ay

# æ£€æŸ¥é€»è¾‘å·è·¯å¾„
ls -la /dev/mapper/
ls -la /dev/trim_*/

# ä½¿ç”¨æ­£ç¡®çš„é€»è¾‘å·è·¯å¾„é‡æ–°å°è¯•æ‰©å®¹
pvresize /dev/sdb1
# ä½¿ç”¨å®Œæ•´è·¯å¾„ï¼Œä¾‹å¦‚ï¼š
lvresize -l +100%FREE /dev/trim_xxx/0
# æˆ–è€…ä½¿ç”¨mapperè·¯å¾„ï¼š
lvresize -l +100%FREE /dev/mapper/trim_xxx-0
```

#### 3. æ–‡ä»¶ç³»ç»Ÿæ‰©å®¹å¤±è´¥
**é”™è¯¯ç°è±¡ï¼š** æ–‡ä»¶ç³»ç»Ÿæ‰©å®¹å‘½ä»¤å¤±è´¥
**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿ
fsck -f /dev/mapper/trim_xxx-0

# é‡æ–°æŒ‚è½½
umount /vol1
mount /dev/mapper/trim_xxx-0 /vol1

# é‡æ–°å°è¯•æ‰©å®¹
btrfs filesystem resize max /vol1
```

#### 4. ç³»ç»Ÿæ— æ³•å¯åŠ¨
**é”™è¯¯ç°è±¡ï¼š** æ‰©å®¹åç³»ç»Ÿæ— æ³•æ­£å¸¸å¯åŠ¨
**è§£å†³æ–¹æ¡ˆï¼š**
1. åœ¨ESXiä¸­æ¢å¤è™šæ‹Ÿæœºå¿«ç…§
2. æˆ–ä½¿ç”¨æ•‘æ´æ¨¡å¼ä¿®å¤ç³»ç»Ÿ
3. æ¢å¤å¤‡ä»½çš„é…ç½®æ–‡ä»¶

### ç´§æ€¥æ¢å¤æ­¥éª¤

å¦‚æœæ‰©å®¹è¿‡ç¨‹ä¸­å‡ºç°ä¸¥é‡é—®é¢˜ï¼š

#### 1. ç«‹å³åœæ­¢æ“ä½œ
```bash
# åœæ­¢æ‰€æœ‰æ­£åœ¨è¿›è¡Œçš„æ“ä½œ
# ä¸è¦å¼ºåˆ¶é‡å¯ç³»ç»Ÿ
```

#### 2. æ¢å¤å¤‡ä»½é…ç½®
```bash
# æ¢å¤åˆ†åŒºè¡¨
sfdisk /dev/sdb < "$BACKUP_DIR/partition_table.backup"

# æ¢å¤LVMé…ç½®
vgcfgrestore trim_xxx -f "$BACKUP_DIR/lvm_backup"

# æ¢å¤fstab
cp "$BACKUP_DIR/fstab.backup" /etc/fstab
```

#### 3. é‡å¯ç³»ç»Ÿ
```bash
reboot
```

## â“ å¸¸è§é—®é¢˜

### Q1: æ‰©å®¹åé£ç‰›OSç•Œé¢ä»æ˜¾ç¤ºåŸæ¥çš„å¤§å°ï¼Ÿ
**A:** è¿™æ˜¯æ­£å¸¸ç°è±¡ï¼Œå¯èƒ½éœ€è¦ï¼š
- é‡å¯é£ç‰›OSæœåŠ¡ï¼š`systemctl restart fnos`
- é‡å¯ç³»ç»Ÿï¼š`reboot`
- æ¸…é™¤æµè§ˆå™¨ç¼“å­˜å¹¶é‡æ–°ç™»å½•

### Q2: å¯ä»¥åœ¨ä¸åœæœºçš„æƒ…å†µä¸‹æ‰©å®¹å—ï¼Ÿ
**A:** ç†è®ºä¸Šå¯ä»¥ï¼Œä½†å¼ºçƒˆå»ºè®®ï¼š
- åœ¨ç»´æŠ¤çª—å£æœŸé—´è¿›è¡Œ
- æå‰åˆ›å»ºè™šæ‹Ÿæœºå¿«ç…§
- ç¡®ä¿æœ‰å®Œæ•´çš„æ•°æ®å¤‡ä»½

### Q3: æ‰©å®¹è¿‡ç¨‹ä¸­æ•°æ®ä¼šä¸¢å¤±å—ï¼Ÿ
**A:** æ­£å¸¸æƒ…å†µä¸‹ä¸ä¼šï¼Œä½†å­˜åœ¨é£é™©ï¼š
- åˆ†åŒºæ“ä½œæœ‰ä¸€å®šé£é™©
- å»ºè®®æå‰å¤‡ä»½é‡è¦æ•°æ®
- åˆ›å»ºè™šæ‹Ÿæœºå¿«ç…§ä½œä¸ºä¿é™©

### Q4: æ”¯æŒå“ªäº›æ–‡ä»¶ç³»ç»Ÿï¼Ÿ
**A:** è„šæœ¬æ”¯æŒä»¥ä¸‹æ–‡ä»¶ç³»ç»Ÿï¼š
- btrfsï¼ˆé£ç‰›OSé»˜è®¤ï¼‰
- ext4/ext3/ext2
- xfs
- å…¶ä»–æ–‡ä»¶ç³»ç»Ÿéœ€è¦æ‰‹åŠ¨æ“ä½œ

### Q5: å¯ä»¥æ‰©å®¹å¤šæ¬¡å—ï¼Ÿ
**A:** å¯ä»¥ï¼Œæ¯æ¬¡ESXiæ‰©å®¹åéƒ½å¯ä»¥ä½¿ç”¨æ­¤æ–¹æ³•ï¼š
- ç¡®ä¿æ¯æ¬¡æ‰©å®¹å‰åˆ›å»ºå¿«ç…§
- å»ºè®®å•æ¬¡æ‰©å®¹ä¸è¦è¿‡å¤§
- éªŒè¯ä¸Šæ¬¡æ‰©å®¹æˆåŠŸåå†è¿›è¡Œä¸‹æ¬¡æ‰©å®¹

### Q6: è„šæœ¬æ‰§è¡Œå¤±è´¥æ€ä¹ˆåŠï¼Ÿ
**A:** æŒ‰ä»¥ä¸‹æ­¥éª¤æ’æŸ¥ï¼š
1. æ£€æŸ¥æ˜¯å¦æœ‰rootæƒé™ï¼š`sudo whoami`
2. æ£€æŸ¥ç£ç›˜æ˜¯å¦å·²åœ¨ESXiä¸­æ‰©å®¹ï¼š`lsblk`
3. æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—ï¼š`tail -f /var/log/fnos_storage_expand_*.log`
4. ä½¿ç”¨å¹²è¿è¡Œæ¨¡å¼æ£€æµ‹ï¼š`sudo ./fnos_storage_expand.sh --dry-run`
5. æ£€æŸ¥LVMçŠ¶æ€ï¼š`pvdisplay && vgdisplay && lvdisplay`
6. éªŒè¯åˆ†åŒºè¡¨ç±»å‹ï¼š`fdisk -l /dev/sdb`ï¼ˆæ›¿æ¢ä¸ºå®é™…è®¾å¤‡ï¼‰

### Q7: å¦‚ä½•å›æ»šæ‰©å®¹æ“ä½œï¼Ÿ
**A:** ä½¿ç”¨é›†æˆçš„å¤‡ä»½æ¢å¤åŠŸèƒ½ï¼š
```bash
# åˆ—å‡ºå¯ç”¨å¤‡ä»½
sudo ./fnos_storage_expand.sh --backup list

# æ¢å¤æŒ‡å®šå¤‡ä»½
sudo ./fnos_storage_expand.sh --backup restore /tmp/fnos_backup_20240101_120000

# æˆ–è€…ä½¿ç”¨äº¤äº’å¼èœå•
sudo ./fnos_storage_expand.sh --backup
```

### Q8: æ‰©å®¹åæ€§èƒ½æ˜¯å¦ä¼šå—å½±å“ï¼Ÿ
**A:** æ­£å¸¸æƒ…å†µä¸‹ä¸ä¼šï¼š
- LVMæ‰©å®¹æ˜¯åœ¨çº¿æ“ä½œï¼Œä¸å½±å“æ€§èƒ½
- æ–‡ä»¶ç³»ç»Ÿæ‰©å®¹å¯èƒ½çŸ­æš‚å½±å“IO
- å»ºè®®åœ¨ä½è´Ÿè½½æ—¶æ®µè¿›è¡Œæ“ä½œ

### Q9: æ”¯æŒå“ªäº›è™šæ‹ŸåŒ–å¹³å°ï¼Ÿ
**A:** ä¸»è¦æ”¯æŒVMware ESXiï¼Œå…¶ä»–å¹³å°éœ€è¦éªŒè¯ï¼š
- VMware ESXi 6.0+ âœ…
- VMware Workstation âœ… (ç†è®ºæ”¯æŒ)
- Hyper-V âš ï¸ (éœ€è¦æµ‹è¯•)
- KVM/QEMU âš ï¸ (éœ€è¦æµ‹è¯•)

### Q10: å¦‚ä½•éªŒè¯æ‰©å®¹æ˜¯å¦æˆåŠŸï¼Ÿ
**A:** å¤šé‡éªŒè¯æ–¹æ³•ï¼š
1. å‘½ä»¤è¡Œæ£€æŸ¥ï¼š`df -h /vol1`
2. é£ç‰›OSç•Œé¢æ£€æŸ¥å­˜å‚¨ç©ºé—´å¤§å°
3. åˆ›å»ºæµ‹è¯•æ–‡ä»¶éªŒè¯å¯ç”¨ç©ºé—´
4. æ£€æŸ¥LVMçŠ¶æ€ï¼š`lvdisplay`
5. éªŒè¯åˆ†åŒºå¤§å°ï¼š`lsblk`
6. æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿï¼š`btrfs filesystem show`ï¼ˆå¯¹äºbtrfsï¼‰

## ğŸ”’ å®‰å…¨å»ºè®®

### æ“ä½œå‰
1. **åˆ›å»ºå®Œæ•´å¤‡ä»½** - è™šæ‹Ÿæœºå¿«ç…§æˆ–æ•°æ®å¤‡ä»½
2. **é€‰æ‹©åˆé€‚æ—¶é—´** - åœ¨ç»´æŠ¤çª—å£æœŸé—´æ“ä½œ
3. **å‡†å¤‡å›æ»šæ–¹æ¡ˆ** - ç¡®ä¿èƒ½å¤Ÿå¿«é€Ÿæ¢å¤
4. **æµ‹è¯•ç¯å¢ƒéªŒè¯** - åœ¨æµ‹è¯•ç¯å¢ƒä¸­å…ˆè¡ŒéªŒè¯

### æ“ä½œä¸­
1. **ä»”ç»†ç¡®è®¤** - æ¯ä¸ªæ­¥éª¤éƒ½è¦ä»”ç»†ç¡®è®¤
2. **ä¿å­˜æ—¥å¿—** - è®°å½•æ‰€æœ‰æ“ä½œæ­¥éª¤å’Œç»“æœ
3. **åˆ†æ­¥æ‰§è¡Œ** - ä¸è¦è·³è¿‡ä»»ä½•æ­¥éª¤
4. **ç›‘æ§çŠ¶æ€** - å¯†åˆ‡å…³æ³¨ç³»ç»ŸçŠ¶æ€

### æ“ä½œå
1. **å…¨é¢éªŒè¯** - ç¡®è®¤æ‰€æœ‰åŠŸèƒ½æ­£å¸¸
2. **æ€§èƒ½æµ‹è¯•** - æ£€æŸ¥ç³»ç»Ÿæ€§èƒ½æ˜¯å¦æ­£å¸¸
3. **ä¿ç•™å¤‡ä»½** - ä¿ç•™æ“ä½œå‰çš„å¤‡ä»½ä¸€æ®µæ—¶é—´
4. **æ–‡æ¡£è®°å½•** - è®°å½•æ“ä½œè¿‡ç¨‹å’Œç»“æœ

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœåœ¨æ‰©å®¹è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. **æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶** - æ£€æŸ¥è„šæœ¬ç”Ÿæˆçš„è¯¦ç»†æ—¥å¿—
2. **æ”¶é›†ç³»ç»Ÿä¿¡æ¯** - ä¿å­˜ç›¸å…³çš„ç³»ç»ŸçŠ¶æ€ä¿¡æ¯
3. **å¯»æ±‚å¸®åŠ©** - è”ç³»æŠ€æœ¯æ”¯æŒæˆ–ç¤¾åŒºè®ºå›
4. **æä¾›è¯¦ç»†ä¿¡æ¯** - åŒ…æ‹¬é”™è¯¯ä¿¡æ¯ã€ç³»ç»Ÿé…ç½®ç­‰

## ğŸ“ ç‰ˆæœ¬å†å²

- **v1.1** (2024-12-XX) - ä¿®å¤ç‰ˆæœ¬ï¼Œè§£å†³å…³é”®é—®é¢˜
  - ä¿®å¤LVMé€»è¾‘å·è·¯å¾„æ„å»ºé—®é¢˜
  - æ·»åŠ GPTåˆ†åŒºè¡¨æ”¯æŒ
  - æ”¹è¿›æ•°æ®è·å–å’ŒéªŒè¯æœºåˆ¶
  - ä¼˜åŒ–é”™è¯¯å¤„ç†å’Œæ—¥å¿—è¾“å‡º
- **v1.0** (2024-01-XX) - åˆå§‹ç‰ˆæœ¬ï¼Œæ”¯æŒåŸºæœ¬çš„LVMæ‰©å®¹åŠŸèƒ½
  - æ”¯æŒè‡ªåŠ¨æ£€æµ‹å­˜å‚¨é…ç½®
  - æ”¯æŒå¤šç§æ–‡ä»¶ç³»ç»Ÿç±»å‹
  - åŒ…å«å®Œæ•´çš„å¤‡ä»½å’Œæ¢å¤æœºåˆ¶

---

**å…è´£å£°æ˜ï¼š** æ­¤æ“ä½œæ¶‰åŠç³»ç»Ÿåº•å±‚å­˜å‚¨é…ç½®ï¼Œå­˜åœ¨æ•°æ®ä¸¢å¤±é£é™©ã€‚è¯·åŠ¡å¿…åœ¨æ“ä½œå‰åˆ›å»ºå®Œæ•´å¤‡ä»½ï¼Œå¹¶åœ¨æµ‹è¯•ç¯å¢ƒä¸­éªŒè¯ã€‚ä½¿ç”¨è€…éœ€è‡ªè¡Œæ‰¿æ‹…æ“ä½œé£é™©ã€‚ 